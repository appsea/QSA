"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var appSettings = require("application-settings");
var navigationModule = require("../shared/navigation");
var SETTINGS = "SETTINGS";
var ADDTICK = "ADDTICK";
var SettingsService = /** @class */ (function () {
    function SettingsService() {
        this.handleStructureChange();
        this.clearAll();
        this.createSetting();
    }
    SettingsService.getInstance = function () {
        return SettingsService._instance;
    };
    SettingsService.prototype.createSetting = function () {
        if (appSettings.hasKey(SETTINGS)) {
            this.setting = this.readSettings();
        }
        else {
            this.setting = this.getDefaultSetting();
            appSettings.setString(SETTINGS, JSON.stringify(this.setting));
        }
        if (!appSettings.hasKey(SettingsService.MAIN)) {
            this.saveCache(SettingsService.MAIN, this.getDefaultMain());
        }
        if (!appSettings.hasKey(SettingsService.QUICK)) {
            this.saveCache(SettingsService.QUICK, this.getDefaultQuick());
        }
        if (!appSettings.hasKey(SettingsService.TICK)) {
            this.saveCache(SettingsService.TICK, this.getDefaultTick());
        }
    };
    SettingsService.prototype.readSettings = function () {
        var setting;
        try {
            setting = appSettings.hasKey(SETTINGS) ? JSON.parse(appSettings.getString(SETTINGS)) : this.getDefaultSetting();
        }
        catch (error) {
            setting = this.getDefaultSetting();
        }
        return setting;
    };
    SettingsService.prototype.readCache = function (mode) {
        var state;
        if (appSettings.hasKey(mode)) {
            state = JSON.parse(appSettings.getString(mode));
        }
        else if (mode === SettingsService.MAIN) {
            state = this.getDefaultMain();
        }
        else if (mode === SettingsService.QUICK) {
            state = this.getDefaultQuick();
        }
        else if (mode === SettingsService.TICK) {
            state = this.getDefaultTick();
        }
        else {
            state = this.getDefaultQuick();
        }
        return state;
    };
    SettingsService.prototype.saveCache = function (mode, state) {
        var newState = JSON.stringify(state);
        appSettings.setString(mode, newState);
    };
    SettingsService.prototype.clearCache = function (mode) {
        appSettings.remove(mode);
    };
    SettingsService.prototype.clearAll = function () {
        if (SettingsService.CLEAR || !appSettings.hasKey(SettingsService.VERSION) || appSettings.getNumber(SettingsService.VERSION) < SettingsService.VERSION_NUMBER) {
            this.clearCache(SettingsService.MAIN);
            this.clearCache(SettingsService.QUICK);
            this.clearCache(SettingsService.QUESTIONS);
            this.clearCache(SettingsService.QUICK1);
            this.clearCache(SettingsService.ROUTE);
        }
        this.clearCache(SettingsService.PRACTICE);
        appSettings.setNumber(SettingsService.VERSION, SettingsService.VERSION_NUMBER);
    };
    SettingsService.prototype.saveSetting = function (setting) {
        var newSetting = JSON.stringify(setting);
        appSettings.setString(SETTINGS, newSetting);
    };
    SettingsService.prototype.saveQuestions = function (questions) {
        var json = JSON.stringify(questions);
        appSettings.setString(SettingsService.QUESTIONS, json);
    };
    SettingsService.prototype.readQuestions = function () {
        var questions;
        try {
            questions = this.hasQuestions() ? JSON.parse(appSettings.getString(SettingsService.QUESTIONS)) : [];
        }
        catch (error) {
            questions = [];
        }
        return questions;
    };
    SettingsService.prototype.saveRoute = function (path) {
        appSettings.setString(SettingsService.ROUTE, path);
    };
    SettingsService.prototype.getRoute = function () {
        if (appSettings.hasKey(SettingsService.ROUTE)) {
            return appSettings.getString(SettingsService.ROUTE);
        }
        return "question/practice";
    };
    SettingsService.prototype.saveScore = function (mode, percentage) {
        var key = 'stats' + mode;
        if (appSettings.hasKey(key)) {
            var items = JSON.parse(appSettings.getString(key));
            if (items.length >= 5) {
                items.shift();
            }
            items.push(percentage);
            appSettings.setString(key, JSON.stringify(items));
        }
        else {
            var items = new Array();
            items.push(percentage);
            appSettings.setString(key, JSON.stringify(items));
        }
    };
    SettingsService.prototype.getScore = function (mode) {
        var key = 'stats' + mode;
        var items = [];
        if (appSettings.hasKey(key)) {
            items = JSON.parse(appSettings.getString(key));
        }
        return items;
    };
    SettingsService.prototype.hasQuestions = function () {
        return appSettings.hasKey(SettingsService.QUESTIONS);
    };
    SettingsService.route = function () {
        var path = SettingsService.getInstance().getRoute();
        if (!path.includes(SettingsService.PRACTICE)) {
            navigationModule.toPage(path);
            return true;
        }
        return false;
    };
    SettingsService.prototype.getDefaultQuick = function () {
        return {
            questions: [],
            questionNumber: 0,
            totalQuestions: this.readSettings().totalQuestionsQuick
        };
    };
    SettingsService.prototype.getDefaultMain = function () {
        return {
            questions: [],
            questionNumber: 0,
            totalQuestions: this.readSettings().totalQuestionsMain
        };
    };
    SettingsService.prototype.getDefaultTick = function () {
        return {
            questions: [],
            questionNumber: 0,
            totalQuestions: this.readSettings().totalQuestionsTick,
            time: this.readSettings().totalTime
        };
    };
    SettingsService.prototype.handleStructureChange = function () {
        if (appSettings.hasKey(SETTINGS) && !appSettings.hasKey(ADDTICK)) {
            var setting = JSON.parse(appSettings.getString(SETTINGS));
            setting.totalQuestionsTick = this.getDefaultSetting().totalQuestionsTick;
            setting.totalTime = this.getDefaultSetting().totalTime;
            appSettings.setString(SETTINGS, JSON.stringify(setting));
            appSettings.setBoolean(ADDTICK, true);
        }
    };
    SettingsService.prototype.getDefaultSetting = function () {
        return {
            totalQuestionsMain: 67,
            totalQuestionsQuick: 15,
            totalTime: 110,
            totalQuestionsTick: 65
        };
    };
    SettingsService.VERSION_NUMBER = 9;
    SettingsService.CLEAR = false;
    SettingsService.VERSION = "VERSION";
    SettingsService.MAIN = "main";
    SettingsService.TICK = "tick";
    SettingsService.QUICK = "quick";
    SettingsService.QUICK1 = "short";
    SettingsService.PRACTICE = "practice";
    SettingsService.ROUTE = "route";
    SettingsService.QUESTIONS = "questions";
    SettingsService._instance = new SettingsService();
    return SettingsService;
}());
exports.SettingsService = SettingsService;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2V0dGluZ3Muc2VydmljZS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbInNldHRpbmdzLnNlcnZpY2UudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSxrREFBb0Q7QUFFcEQsdURBQXlEO0FBRXpELElBQU0sUUFBUSxHQUFXLFVBQVUsQ0FBQztBQUNwQyxJQUFNLE9BQU8sR0FBVyxTQUFTLENBQUM7QUFFbEM7SUFvQkk7UUFDSSxJQUFJLENBQUMscUJBQXFCLEVBQUUsQ0FBQztRQUM3QixJQUFJLENBQUMsUUFBUSxFQUFFLENBQUM7UUFDaEIsSUFBSSxDQUFDLGFBQWEsRUFBRSxDQUFDO0lBQ3pCLENBQUM7SUFWTSwyQkFBVyxHQUFsQjtRQUNJLE1BQU0sQ0FBQyxlQUFlLENBQUMsU0FBUyxDQUFDO0lBQ3JDLENBQUM7SUFVTSx1Q0FBYSxHQUFwQjtRQUNJLEVBQUUsQ0FBQyxDQUFDLFdBQVcsQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQy9CLElBQUksQ0FBQyxPQUFPLEdBQUcsSUFBSSxDQUFDLFlBQVksRUFBRSxDQUFDO1FBQ3ZDLENBQUM7UUFBQyxJQUFJLENBQUMsQ0FBQztZQUNKLElBQUksQ0FBQyxPQUFPLEdBQUcsSUFBSSxDQUFDLGlCQUFpQixFQUFFLENBQUM7WUFDeEMsV0FBVyxDQUFDLFNBQVMsQ0FBQyxRQUFRLEVBQUUsSUFBSSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQztRQUNsRSxDQUFDO1FBQ0QsRUFBRSxDQUFDLENBQUMsQ0FBQyxXQUFXLENBQUMsTUFBTSxDQUFDLGVBQWUsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDNUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxlQUFlLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxjQUFjLEVBQUUsQ0FBQyxDQUFDO1FBQ2hFLENBQUM7UUFDRCxFQUFFLENBQUMsQ0FBQyxDQUFDLFdBQVcsQ0FBQyxN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RUFBRSxHQUFHO1lBQ2Qsa0JBQWtCLEVBQUUsRUFBRTtTQUN6QixDQUFDO0lBQ04sQ0FBQztJQXhNTSw4QkFBYyxHQUFXLENBQUMsQ0FBQztJQUMzQixxQkFBSyxHQUFZLEtBQUssQ0FBQztJQUN2Qix1QkFBTyxHQUFXLFNBQVMsQ0FBQztJQUM1QixvQkFBSSxHQUFXLE1BQU0sQ0FBQztJQUN0QixvQkFBSSxHQUFXLE1BQU0sQ0FBQztJQUN0QixxQkFBSyxHQUFXLE9BQU8sQ0FBQztJQUN4QixzQkFBTSxHQUFXLE9BQU8sQ0FBQztJQUN6Qix3QkFBUSxHQUFXLFVBQVUsQ0FBQztJQUM5QixxQkFBSyxHQUFXLE9BQU8sQ0FBQztJQUN4Qix5QkFBUyxHQUFXLFdBQVcsQ0FBQztJQU94Qix5QkFBUyxHQUFvQixJQUFJLGVBQWUsRUFBRSxDQUFDO0lBeUx0RSxzQkFBQztDQUFBLEFBM01ELElBMk1DO0FBM01ZLDBDQUFlIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgYXBwU2V0dGluZ3MgZnJvbSAnYXBwbGljYXRpb24tc2V0dGluZ3MnO1xyXG5pbXBvcnQge0lRdWVzdGlvbiwgSVNldHRpbmcsIFN0YXRlfSBmcm9tIFwiLi4vc2hhcmVkL3F1ZXN0aW9ucy5tb2RlbFwiO1xyXG5pbXBvcnQgKiBhcyBuYXZpZ2F0aW9uTW9kdWxlIGZyb20gJy4uL3NoYXJlZC9uYXZpZ2F0aW9uJztcclxuXHJcbmNvbnN0IFNFVFRJTkdTOiBzdHJpbmcgPSBcIlNFVFRJTkdTXCI7XHJcbmNvbnN0IEFERFRJQ0s6IHN0cmluZyA9IFwiQUREVElDS1wiO1xyXG5cclxuZXhwb3J0IGNsYXNzIFNldHRpbmdzU2VydmljZSB7XHJcblxyXG4gICAgc3RhdGljIFZFUlNJT05fTlVNQkVSOiBudW1iZXIgPSA5O1xyXG4gICAgc3RhdGljIENMRUFSOiBib29sZWFuID0gZmFsc2U7XHJcbiAgICBzdGF0aWMgVkVSU0lPTjogc3RyaW5nID0gXCJWRVJTSU9OXCI7XHJcbiAgICBzdGF0aWMgTUFJTjogc3RyaW5nID0gXCJtYWluXCI7XHJcbiAgICBzdGF0aWMgVElDSzogc3RyaW5nID0gXCJ0aWNrXCI7XHJcbiAgICBzdGF0aWMgUVVJQ0s6IHN0cmluZyA9IFwicXVpY2tcIjtcclxuICAgIHN0YXRpYyBRVUlDSzE6IHN0cmluZyA9IFwic2hvcnRcIjtcclxuICAgIHN0YXRpYyBQUkFDVElDRTogc3RyaW5nID0gXCJwcmFjdGljZVwiO1xyXG4gICAgc3RhdGljIFJPVVRFOiBzdHJpbmcgPSBcInJvdXRlXCI7XHJcbiAgICBzdGF0aWMgUVVFU1RJT05TOiBzdHJpbmcgPSBcInF1ZXN0aW9uc1wiO1xyXG4gICAgcHJpdmF0ZSBzZXR0aW5nOiBJU2V0dGluZztcclxuXHJcbiAgICBzdGF0aWMgZ2V0SW5zdGFuY2UoKTogU2V0dGluZ3NTZXJ2aWNlIHtcclxuICAgICAgICByZXR1cm4gU2V0dGluZ3NTZXJ2aWNlLl9pbnN0YW5jZTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHN0YXRpYyBfaW5zdGFuY2U6IFNldHRpbmdzU2VydmljZSA9IG5ldyBTZXR0aW5nc1NlcnZpY2UoKTtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICB0aGlzLmhhbmRsZVN0cnVjdHVyZUNoYW5nZSgpO1xyXG4gICAgICAgIHRoaXMuY2xlYXJBbGwoKTtcclxuICAgICAgICB0aGlzLmNyZWF0ZVNldHRpbmcoKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgY3JlYXRlU2V0dGluZygpOiB2b2lkIHtcclxuICAgICAgICBpZiAoYXBwU2V0dGluZ3MuaGFzS2V5KFNFVFRJTkdTKSkge1xyXG4gICAgICAgICAgICB0aGlzLnNldHRpbmcgPSB0aGlzLnJlYWRTZXR0aW5ncygpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0dGluZyA9IHRoaXMuZ2V0RGVmYXVsdFNldHRpbmcoKTtcclxuICAgICAgICAgICAgYXBwU2V0dGluZ3Muc2V0U3RyaW5nKFNFVFRJTkdTLCBKU09OLnN0cmluZ2lmeSh0aGlzLnNldHRpbmcpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCFhcHBTZXR0aW5ncy5oYXNLZXkoU2V0dGluZ3NTZXJ2aWNlLk1BSU4pKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2F2ZUNhY2hlKFNldHRpbmdzU2VydmljZS5NQUlOLCB0aGlzLmdldERlZmF1bHRNYWluKCkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIWFwcFNldHRpbmdzLmhhc0tleShTZXR0aW5nc1NlcnZpY2UuUVVJQ0spKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2F2ZUNhY2hlKFNldHRpbmdzU2VydmljZS5RVUlDSywgdGhpcy5nZXREZWZhdWx0UXVpY2soKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICghYXBwU2V0dGluZ3MuaGFzS2V5KFNldHRpbmdzU2VydmljZS5USUNLKSkge1xyXG4gICAgICAgICAgICB0aGlzLnNhdmVDYWNoZShTZXR0aW5nc1NlcnZpY2UuVElDSywgdGhpcy5nZXREZWZhdWx0VGljaygpKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmVhZFNldHRpbmdzKCk6IElTZXR0aW5nIHtcclxuICAgICAgICBsZXQgc2V0dGluZzogSVNldHRpbmc7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgc2V0dGluZyA9IGFwcFNldHRpbmdzLmhhc0tleShTRVRUSU5HUykgPyBKU09OLnBhcnNlKGFwcFNldHRpbmdzLmdldFN0cmluZyhTRVRUSU5HUykpIDogdGhpcy5nZXREZWZhdWx0U2V0dGluZygpO1xyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIHNldHRpbmcgPSB0aGlzLmdldERlZmF1bHRTZXR0aW5nKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBzZXR0aW5nO1xyXG4gICAgfVxyXG5cclxuICAgIHJlYWRDYWNoZShtb2RlOiBzdHJpbmcpOiBTdGF0ZSB7XHJcbiAgICAgICAgbGV0IHN0YXRlOiBTdGF0ZTtcclxuICAgICAgICBpZihhcHBTZXR0aW5ncy5oYXNLZXkobW9kZSkpe1xyXG4gICAgICAgICAgICBzdGF0ZSA9IEpTT04ucGFyc2UoYXBwU2V0dGluZ3MuZ2V0U3RyaW5nKG1vZGUpKTtcclxuICAgICAgICB9ZWxzZSBpZihtb2RlID09PSBTZXR0aW5nc1NlcnZpY2UuTUFJTil7XHJcbiAgICAgICAgICAgIHN0YXRlID0gdGhpcy5nZXREZWZhdWx0TWFpbigpO1xyXG4gICAgICAgIH1lbHNlIGlmKG1vZGUgPT09IFNldHRpbmdzU2VydmljZS5RVUlDSyl7XHJcbiAgICAgICAgICAgIHN0YXRlID0gdGhpcy5nZXREZWZhdWx0UXVpY2soKTtcclxuICAgICAgICB9ZWxzZSBpZihtb2RlID09PSBTZXR0aW5nc1NlcnZpY2UuVElDSyl7XHJcbiAgICAgICAgICAgIHN0YXRlID0gdGhpcy5nZXREZWZhdWx0VGljaygpO1xyXG4gICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICBzdGF0ZSA9IHRoaXMuZ2V0RGVmYXVsdFF1aWNrKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBzdGF0ZTtcclxuICAgIH1cclxuXHJcbiAgICBzYXZlQ2FjaGUobW9kZTogc3RyaW5nLCBzdGF0ZTogU3RhdGUpOiB2b2lkIHtcclxuICAgICAgICBjb25zdCBuZXdTdGF0ZTogc3RyaW5nID0gSlNPTi5zdHJpbmdpZnkoc3RhdGUpO1xyXG4gICAgICAgIGFwcFNldHRpbmdzLnNldFN0cmluZyhtb2RlLCBuZXdTdGF0ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgY2xlYXJDYWNoZShtb2RlOiBzdHJpbmcpOiB2b2lkIHtcclxuICAgICAgICBhcHBTZXR0aW5ncy5yZW1vdmUobW9kZSk7XHJcbiAgICB9XHJcblxyXG4gICAgY2xlYXJBbGwoKTogdm9pZCB7XHJcbiAgICAgICAgaWYgKFNldHRpbmdzU2VydmljZS5DTEVBUiB8fCAhYXBwU2V0dGluZ3MuaGFzS2V5KFNldHRpbmdzU2VydmljZS5WRVJTSU9OKSB8fCBhcHBTZXR0aW5ncy5nZXROdW1iZXIoU2V0dGluZ3NTZXJ2aWNlLlZFUlNJT04pIDwgU2V0dGluZ3NTZXJ2aWNlLlZFUlNJT05fTlVNQkVSKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2xlYXJDYWNoZShTZXR0aW5nc1NlcnZpY2UuTUFJTik7XHJcbiAgICAgICAgICAgIHRoaXMuY2xlYXJDYWNoZShTZXR0aW5nc1NlcnZpY2UuUVVJQ0spO1xyXG4gICAgICAgICAgICB0aGlzLmNsZWFyQ2FjaGUoU2V0dGluZ3NTZXJ2aWNlLlFVRVNUSU9OUyk7XHJcbiAgICAgICAgICAgIHRoaXMuY2xlYXJDYWNoZShTZXR0aW5nc1NlcnZpY2UuUVVJQ0sxKTtcclxuICAgICAgICAgICAgdGhpcy5jbGVhckNhY2hlKFNldHRpbmdzU2VydmljZS5ST1VURSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuY2xlYXJDYWNoZShTZXR0aW5nc1NlcnZpY2UuUFJBQ1RJQ0UpO1xyXG4gICAgICAgIGFwcFNldHRpbmdzLnNldE51bWJlcihTZXR0aW5nc1NlcnZpY2UuVkVSU0lPTiwgU2V0dGluZ3NTZXJ2aWNlLlZFUlNJT05fTlVNQkVSKTtcclxuICAgIH1cclxuXHJcbiAgICBzYXZlU2V0dGluZyhzZXR0aW5nOiBJU2V0dGluZykge1xyXG4gICAgICAgIGNvbnN0IG5ld1NldHRpbmc6IHN0cmluZyA9IEpTT04uc3RyaW5naWZ5KHNldHRpbmcpO1xyXG4gICAgICAgIGFwcFNldHRpbmdzLnNldFN0cmluZyhTRVRUSU5HUywgbmV3U2V0dGluZyk7XHJcbiAgICB9XHJcblxyXG4gICAgc2F2ZVF1ZXN0aW9ucyhxdWVzdGlvbnM6IEFycmF5PElRdWVzdGlvbj4pOiB2b2lkIHtcclxuICAgICAgICBjb25zdCBqc29uOiBzdHJpbmcgPSBKU09OLnN0cmluZ2lmeShxdWVzdGlvbnMpO1xyXG4gICAgICAgIGFwcFNldHRpbmdzLnNldFN0cmluZyhTZXR0aW5nc1NlcnZpY2UuUVVFU1RJT05TLCBqc29uKTtcclxuICAgIH1cclxuXHJcbiAgICByZWFkUXVlc3Rpb25zKCk6IEFycmF5PElRdWVzdGlvbj4ge1xyXG4gICAgICAgIGxldCBxdWVzdGlvbnM6IEFycmF5PElRdWVzdGlvbj47XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgcXVlc3Rpb25zID0gdGhpcy5oYXNRdWVzdGlvbnMoKSA/IEpTT04ucGFyc2UoYXBwU2V0dGluZ3MuZ2V0U3RyaW5nKFNldHRpbmdzU2VydmljZS5RVUVTVElPTlMpKSA6IFtdO1xyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIHF1ZXN0aW9ucyA9IFtdO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcXVlc3Rpb25zO1xyXG4gICAgfVxyXG5cclxuICAgIHNhdmVSb3V0ZShwYXRoOiBzdHJpbmcpOiB2b2lkIHtcclxuICAgICAgICBhcHBTZXR0aW5ncy5zZXRTdHJpbmcoU2V0dGluZ3NTZXJ2aWNlLlJPVVRFLCBwYXRoKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRSb3V0ZSgpOiBzdHJpbmcge1xyXG4gICAgICAgIGlmIChhcHBTZXR0aW5ncy5oYXNLZXkoU2V0dGluZ3NTZXJ2aWNlLlJPVVRFKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gYXBwU2V0dGluZ3MuZ2V0U3RyaW5nKFNldHRpbmdzU2VydmljZS5ST1VURSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBcInF1ZXN0aW9uL3ByYWN0aWNlXCI7XHJcbiAgICB9XHJcblxyXG4gICAgc2F2ZVNjb3JlKG1vZGU6IHN0cmluZywgcGVyY2VudGFnZTogbnVtYmVyKTogdm9pZCB7XHJcbiAgICAgICAgbGV0IGtleSA9ICdzdGF0cycgKyBtb2RlO1xyXG4gICAgICAgIGlmIChhcHBTZXR0aW5ncy5oYXNLZXkoa2V5KSkge1xyXG4gICAgICAgICAgICBsZXQgaXRlbXM6IEFycmF5PG51bWJlcj4gPSBKU09OLnBhcnNlKGFwcFNldHRpbmdzLmdldFN0cmluZyhrZXkpKTtcclxuICAgICAgICAgICAgaWYgKGl0ZW1zLmxlbmd0aCA+PSA1KSB7XHJcbiAgICAgICAgICAgICAgICBpdGVtcy5zaGlmdCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGl0ZW1zLnB1c2gocGVyY2VudGFnZSk7XHJcbiAgICAgICAgICAgIGFwcFNldHRpbmdzLnNldFN0cmluZyhrZXksIEpTT04uc3RyaW5naWZ5KGl0ZW1zKSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgbGV0IGl0ZW1zID0gbmV3IEFycmF5KCk7XHJcbiAgICAgICAgICAgIGl0ZW1zLnB1c2gocGVyY2VudGFnZSk7XHJcbiAgICAgICAgICAgIGFwcFNldHRpbmdzLnNldFN0cmluZyhrZXksIEpTT04uc3RyaW5naWZ5KGl0ZW1zKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGdldFNjb3JlKG1vZGU6IHN0cmluZyk6IEFycmF5PG51bWJlcj4ge1xyXG4gICAgICAgIGxldCBrZXkgPSAnc3RhdHMnICsgbW9kZTtcclxuICAgICAgICBsZXQgaXRlbXM6IEFycmF5PG51bWJlcj4gPSBbXTtcclxuICAgICAgICBpZiAoYXBwU2V0dGluZ3MuaGFzS2V5KGtleSkpIHtcclxuICAgICAgICAgICAgaXRlbXMgPSBKU09OLnBhcnNlKGFwcFNldHRpbmdzLmdldFN0cmluZyhrZXkpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGl0ZW1zO1xyXG4gICAgfVxyXG5cclxuICAgIGhhc1F1ZXN0aW9ucygpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gYXBwU2V0dGluZ3MuaGFzS2V5KFNldHRpbmdzU2VydmljZS5RVUVTVElPTlMpO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyByb3V0ZSgpOiBib29sZWFuIHtcclxuICAgICAgICBsZXQgcGF0aCA9IFNldHRpbmdzU2VydmljZS5nZXRJbnN0YW5jZSgpLmdldFJvdXRlKCk7XHJcbiAgICAgICAgaWYgKCFwYXRoLmluY2x1ZGVzKFNldHRpbmdzU2VydmljZS5QUkFDVElDRSkpIHtcclxuICAgICAgICAgICAgbmF2aWdhdGlvbk1vZHVsZS50b1BhZ2UocGF0aCk7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBnZXREZWZhdWx0UXVpY2soKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgcXVlc3Rpb25zOiBbXSxcclxuICAgICAgICAgICAgcXVlc3Rpb25OdW1iZXI6IDAsXHJcbiAgICAgICAgICAgIHRvdGFsUXVlc3Rpb25zOiB0aGlzLnJlYWRTZXR0aW5ncygpLnRvdGFsUXVlc3Rpb25zUXVpY2tcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZ2V0RGVmYXVsdE1haW4oKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgcXVlc3Rpb25zOiBbXSxcclxuICAgICAgICAgICAgcXVlc3Rpb25OdW1iZXI6IDAsXHJcbiAgICAgICAgICAgIHRvdGFsUXVlc3Rpb25zOiB0aGlzLnJlYWRTZXR0aW5ncygpLnRvdGFsUXVlc3Rpb25zTWFpblxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBnZXREZWZhdWx0VGljaygpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBxdWVzdGlvbnM6IFtdLFxyXG4gICAgICAgICAgICBxdWVzdGlvbk51bWJlcjogMCxcclxuICAgICAgICAgICAgdG90YWxRdWVzdGlvbnM6IHRoaXMucmVhZFNldHRpbmdzKCkudG90YWxRdWVzdGlvbnNUaWNrLFxyXG4gICAgICAgICAgICB0aW1lOiB0aGlzLnJlYWRTZXR0aW5ncygpLnRvdGFsVGltZVxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBoYW5kbGVTdHJ1Y3R1cmVDaGFuZ2UoKSB7XHJcbiAgICAgICAgaWYgKGFwcFNldHRpbmdzLmhhc0tleShTRVRUSU5HUykgJiYgIWFwcFNldHRpbmdzLmhhc0tleShBRERUSUNLKSkge1xyXG4gICAgICAgICAgICBsZXQgc2V0dGluZzogSVNldHRpbmcgPSBKU09OLnBhcnNlKGFwcFNldHRpbmdzLmdldFN0cmluZyhTRVRUSU5HUykpO1xyXG4gICAgICAgICAgICBzZXR0aW5nLnRvdGFsUXVlc3Rpb25zVGljayA9IHRoaXMuZ2V0RGVmYXVsdFNldHRpbmcoKS50b3RhbFF1ZXN0aW9uc1RpY2s7XHJcbiAgICAgICAgICAgIHNldHRpbmcudG90YWxUaW1lID0gdGhpcy5nZXREZWZhdWx0U2V0dGluZygpLnRvdGFsVGltZTtcclxuICAgICAgICAgICAgYXBwU2V0dGluZ3Muc2V0U3RyaW5nKFNFVFRJTkdTLCBKU09OLnN0cmluZ2lmeShzZXR0aW5nKSk7XHJcbiAgICAgICAgICAgIGFwcFNldHRpbmdzLnNldEJvb2xlYW4oQUREVElDSywgdHJ1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZ2V0RGVmYXVsdFNldHRpbmcoKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgdG90YWxRdWVzdGlvbnNNYWluOiA2NyxcclxuICAgICAgICAgICAgdG90YWxRdWVzdGlvbnNRdWljazogMTUsXHJcbiAgICAgICAgICAgIHRvdGFsVGltZTogMTEwLFxyXG4gICAgICAgICAgICB0b3RhbFF1ZXN0aW9uc1RpY2s6IDY1XHJcbiAgICAgICAgfTtcclxuICAgIH1cclxufSJdfQ==